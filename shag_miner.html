<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>1SHAG –ú–∞–π–Ω—ñ–Ω–≥-—Ñ–µ—Ä–º–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="shag_favicon_transparent.png" />

  <!-- Ethers.js –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≥–∞–º–∞–Ω—Ü–µ–º —Ç–∞ —Å–º–∞—Ä—Ç–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #26263a 0, #050509 45%, #000000 100%);
      color: #f5f5f5;
    }

    .wrapper {
      width: 100%;
      max-width: 480px;
      padding: 16px;
    }

    .card {
      width: 100%;
      background: rgba(10, 10, 18, 0.97);
      border-radius: 22px;
      padding: 20px 18px 16px;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.85);
      border: 1px solid rgba(255, 215, 0, 0.25);
      position: relative;
      overflow: hidden;
    }

    /* –§–æ–Ω–æ–≤—ñ ‚Äú—Ñ–µ—Ä–º–∏‚Äù */
    .bg-rack {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: 0.08;
      background-image: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0.1) 1px,
          transparent 1px
        ),
        linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.05) 1px,
          transparent 1px
        );
      background-size: 40px 40px;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      z-index: 1;
      margin-bottom: 12px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title {
      font-size: 18px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 12px;
      color: #c6c6d8;
    }

    .wallet-btn,
    .wallet-indicator {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      border: 1px solid #3b3b5a;
      background: #12121c;
      color: #f5f5f5;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .wallet-btn:hover {
      border-color: #f1c550;
      box-shadow: 0 0 0 1px rgba(241, 197, 80, 0.4);
    }

    .wallet-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ff8080;
    }

    .wallet-dot.ok {
      background: #9be38b;
    }

    .wallet-dot.warn {
      background: #f5d26c;
    }

    /* –ú–æ–Ω–µ—Ç–∞ */
    .center {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .coin {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #fff8dc 0, #f4c96a 30%, #b8741a 60%, #4a2b0f 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow:
        0 0 0 2px rgba(0, 0, 0, 0.9),
        0 0 30px rgba(255, 215, 0, 0.9),
        inset 0 0 18px rgba(0, 0, 0, 0.6);
      position: relative;
      overflow: hidden;
      margin-bottom: 12px;
      animation: coin-sway 6s ease-in-out infinite;
    }

    .coin::before {
      content: "1";
      font-size: 44px;
      font-weight: 800;
      color: #3a2107;
      text-shadow:
        0 1px 0 #f9e7b0,
        0 0 8px rgba(0, 0, 0, 0.95);
    }

    .coin::after {
      content: "–®–ê–ì";
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.08em;
      color: #3a2107;
      text-shadow:
        0 1px 0 #f9e7b0,
        0 0 8px rgba(0, 0, 0, 0.95);
    }

    .coin-glint {
      position: absolute;
      width: 180%;
      height: 40%;
      top: -20%;
      left: -40%;
      background: linear-gradient(
        120deg,
        transparent 0%,
        rgba(255, 255, 255, 0.7) 40%,
        transparent 100%
      );
      opacity: 0;
      transform: rotate(20deg);
      animation: glint 10s linear infinite;
    }

    @keyframes coin-sway {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(7deg); }
      100% { transform: rotateY(0deg); }
    }

    @keyframes glint {
      0% { transform: translateX(-120%) rotate(20deg); opacity: 0; }
      5% { opacity: 0; }
      10% { opacity: 1; }
      20% { transform: translateX(120%) rotate(20deg); opacity: 0; }
      100% { transform: translateX(120%) rotate(20deg); opacity: 0; }
    }

    .panel-label {
      font-size: 11px;
      color: #d7cfa9;
      margin-bottom: 4px;
    }

    .counter {
      width: 100%;
      background: #11111c;
      border-radius: 12px;
      border: 1px solid #343454;
      padding: 8px 10px;
      text-align: center;
      margin-bottom: 8px;
      box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.8);
    }

    .counter-value {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 0.04em;
      font-family: "Courier New", monospace;
      color: #ffe9a3;
    }

    .counter-unit {
      font-size: 12px;
      color: #d7cfa9;
      margin-left: 4px;
    }

    .speed {
      font-size: 11px;
      color: #9f9fc0;
      margin-top: 2px;
    }

    .progress-wrap {
      width: 100%;
      margin-top: 10px;
      margin-bottom: 4px;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: #181826;
      overflow: hidden;
      border: 1px solid #343454;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, #f1c550, #b8741a);
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      transition: width 0.25s ease-out;
    }

    .status {
      font-size: 12px;
      margin-top: 6px;
      text-align: center;
    }

    .status-ok {
      color: #9be38b;
    }

    .status-warn {
      color: #f5d26c;
    }

    .status-error {
      color: #ff8989;
    }

    .claim-btn {
      margin-top: 14px;
      width: 100%;
      padding: 12px;
      border-radius: 999px;
      border: none;
      font-size: 15px;
      font-weight: 700;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      background: linear-gradient(135deg, #f1c550, #b8741a);
      color: #231407;
      box-shadow:
        0 10px 20px rgba(0, 0, 0, 0.7),
        0 0 12px rgba(255, 215, 0, 0.8);
      transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.1s;
    }

    .claim-btn:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow:
        0 14px 26px rgba(0, 0, 0, 0.9),
        0 0 18px rgba(255, 215, 0, 0.9);
      filter: brightness(1.05);
    }

    .claim-btn:active:not(:disabled) {
      transform: translateY(1px);
      box-shadow:
        0 6px 14px rgba(0, 0, 0, 0.8),
        0 0 11px rgba(255, 215, 0, 0.8);
    }

    .claim-btn:disabled {
      cursor: default;
      opacity: 0.6;
      box-shadow: none;
    }

    .timer {
      margin-top: 8px;
      font-size: 11px;
      text-align: center;
      color: #9f9fc0;
    }

    .info {
      margin-top: 10px;
      font-size: 11px;
      text-align: center;
      color: #7f8094;
      line-height: 1.4;
    }

    .small {
      font-size: 10px;
      color: #666885;
    }

    @media (max-width: 480px) {
      .card {
        padding: 18px 14px 14px;
      }

      .counter-value {
        font-size: 20px;
      }
    }
  </style>
</head>

<body>
<div class="wrapper">
  <div class="card">
    <div class="bg-rack"></div>

    <div class="header">
      <div class="title-block">
        <div class="title">1SHAG –ú–∞–π–Ω—ñ–Ω–≥-—Ñ–µ—Ä–º–∞</div>
        <div class="subtitle">–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π Faucet 1SHAG –∑ –ª—ñ–º—ñ—Ç–æ–º 100 SHAG / 24 –≥–æ–¥.</div>
      </div>
      <button id="connectBtn" class="wallet-btn">
        <span class="wallet-dot" id="walletDot"></span>
        <span id="walletLabel">–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</span>
      </button>
    </div>

    <div class="center">
      <div class="coin">
        <div class="coin-glint"></div>
      </div>

      <div style="width: 100%; max-width: 360px;">
        <div class="panel-label">–õ—ñ—á–∏–ª—å–Ω–∏–∫ –≤–∏–¥–æ–±—É—Ç–∫—É</div>
        <div class="counter">
          <span id="counterValue" class="counter-value">0.00000000</span>
          <span class="counter-unit">SHAG</span>
          <div class="speed" id="speedInfo">–®–≤–∏–¥–∫—ñ—Å—Ç—å: 100 SHAG / 24 –≥–æ–¥–∏–Ω–∏</div>
        </div>

        <div class="progress-wrap">
          <div class="panel-label">–ü—Ä–æ–≥—Ä–µ—Å –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ Claim</div>
          <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
          </div>
        </div>

        <div id="statusText" class="status status-warn">
          –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≥–∞–º–∞–Ω–µ—Ü—å —É –º–µ—Ä–µ–∂—ñ BNB Smart Chain, —â–æ–± —Ä–æ–∑–ø–æ—á–∞—Ç–∏.
        </div>

        <button id="claimBtn" class="claim-btn" disabled>
          CLAIM 100 SHAG
        </button>

        <div id="timerText" class="timer">
          –î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ Claim: 24:00:00
        </div>

        <div class="info">
          –ë–∞–ª–∞–Ω—Å Faucet —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É —Å–º–∞—Ä—Ç–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ. <br />
          –£—Å—ñ –≤–∏–ø–ª–∞—Ç–∏ –ø—Ä–æ–∑–æ—Ä—ñ —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ BscScan.
          <div class="small" id="faucetInfo"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ================== –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –ê–î–†–ï–° ==================
  // üî¥ –ê–Ω–∞—Ç–æ–ª—ñ–π: —Ç—É—Ç —Ç–æ–±—ñ —Ç—Ä–µ–±–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ –°–í–û–Æ –ê–î–†–ï–°–£ FAUCET-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é.
  const TOKEN_ADDRESS = "0x38040A7763da2f4aF94fefB0922A3F4Bd5B91772"; // 1SHAG
  const FAUCET_ADDRESS = "0x0000000000000000000000000000000000000000"; // –ó–ê–ú–Ü–ù–ò –ù–ê –ê–î–†–ï–°–£ ShagFaucet –ü–Ü–°–õ–Ø –î–ï–ü–õ–û–Æ
  const TOKEN_DECIMALS = 18;

  // ABI —Ç–æ–∫–µ–Ω–∞: —Ç—ñ–ª—å–∫–∏ —Ç–µ, —â–æ –Ω–∞–º —Ç—Ä–µ–±–∞
  const TOKEN_ABI = [
    "function balanceOf(address) view returns (uint256)",
    "function decimals() view returns (uint8)"
  ];

  // ABI Faucet: —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
  const FAUCET_ABI = [
    "function rewardAmount() view returns (uint256)",
    "function claimInterval() view returns (uint256)",
    "function isPaused() view returns (bool)",
    "function lastClaimTime(address) view returns (uint256)",
    "function faucetBalance() view returns (uint256)",
    "function canClaim(address) view returns (bool)",
    "function claim()",
    "event Claimed(address indexed user, uint256 amount, uint256 timestamp)"
  ];

  // ================== –ó–ú–Ü–ù–ù–Ü –°–¢–ê–ù–£ ==================
  let provider;
  let signer;
  let userAddress = null;
  let tokenContract;
  let faucetContract;

  let rewardAmountBN = null;
  let claimIntervalSec = 24 * 60 * 60;
  let lastClaimTimeSec = 0;
  let isPaused = false;
  let faucetBalanceBN = null;

  let miningTimer = null;

  const connectBtn = document.getElementById("connectBtn");
  const walletDot = document.getElementById("walletDot");
  const walletLabel = document.getElementById("walletLabel");
  const counterValueEl = document.getElementById("counterValue");
  const progressFillEl = document.getElementById("progressFill");
  const statusTextEl = document.getElementById("statusText");
  const claimBtn = document.getElementById("claimBtn");
  const timerTextEl = document.getElementById("timerText");
  const faucetInfoEl = document.getElementById("faucetInfo");

  // ================== –î–û–ü–û–ú–Ü–ñ–ù–Ü –§–£–ù–ö–¶–Ü–á ==================

  function setStatus(message, type = "warn") {
    statusTextEl.textContent = message;
    statusTextEl.className = "status " + (type === "ok" ? "status-ok" : type === "error" ? "status-error" : "status-warn");
  }

  function setWalletIndicator(status, text) {
    walletLabel.textContent = text;
    walletDot.classList.remove("ok", "warn");
    if (status === "ok") walletDot.classList.add("ok");
    if (status === "warn") walletDot.classList.add("warn");
  }

  function formatTimeLeft(sec) {
    if (sec <= 0) return "00:00:00";
    const h = String(Math.floor(sec / 3600)).padStart(2, "0");
    const m = String(Math.floor((sec % 3600) / 60)).padStart(2, "0");
    const s = String(sec % 60).padStart(2, "0");
    return `${h}:${m}:${s}`;
  }

  function trimTo8Decimals(str) {
    if (!str.includes(".")) return str + ".00000000";
    const [whole, frac] = str.split(".");
    const frac8 = (frac + "00000000").slice(0, 8);
    return `${whole}.${frac8}`;
  }

  async function initProvider() {
    if (!window.ethereum) {
      setStatus("–ì–∞–º–∞–Ω–µ—Ü—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å MetaMask –∞–±–æ —Å—É–º—ñ—Å–Ω–∏–π –≥–∞–º–∞–Ω–µ—Ü—å.", "error");
      return false;
    }

    provider = new ethers.providers.Web3Provider(window.ethereum);
    return true;
  }

  async function checkNetwork() {
    const network = await provider.getNetwork();
    // BSC mainnet: 56, testnet: 97
    if (network.chainId !== 56 && network.chainId !== 97) {
      setStatus("–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞. –ü–µ—Ä–µ–º–∫–Ω—ñ—Ç—å –≥–∞–º–∞–Ω–µ—Ü—å –Ω–∞ BNB Smart Chain (mainnet –∞–±–æ testnet).", "error");
      setWalletIndicator("warn", "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞");
      return false;
    }
    const netName = network.chainId === 56 ? "BNB Smart Chain (mainnet)" : "BNB Smart Chain Testnet";
    setWalletIndicator("ok", `–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ: ${netName}`);
    return true;
  }

  async function initContracts() {
    tokenContract = new ethers.Contract(TOKEN_ADDRESS, TOKEN_ABI, provider);
    faucetContract = new ethers.Contract(FAUCET_ADDRESS, FAUCET_ABI, provider);
  }

  async function loadFaucetParams() {
    try {
      rewardAmountBN = await faucetContract.rewardAmount();
      claimIntervalSec = (await faucetContract.claimInterval()).toNumber();
      isPaused = await faucetContract.isPaused();
      faucetBalanceBN = await faucetContract.faucetBalance();

      const rewardHuman = ethers.utils.formatUnits(rewardAmountBN, TOKEN_DECIMALS);
      faucetInfoEl.textContent =
        `–†–æ–∑–º—ñ—Ä –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏: ${trimTo8Decimals(rewardHuman)} SHAG. ` +
        `–Ü–Ω—Ç–µ—Ä–≤–∞–ª –º—ñ–∂ Claim: ${Math.floor(claimIntervalSec / 3600)} –≥–æ–¥. `;

      if (faucetBalanceBN && !faucetBalanceBN.isZero()) {
        const fb = ethers.utils.formatUnits(faucetBalanceBN, TOKEN_DECIMALS);
        faucetInfoEl.textContent += `–ë–∞–ª–∞–Ω—Å Faucet: ${trimTo8Decimals(fb)} SHAG.`;
      } else {
        faucetInfoEl.textContent += "Faucet –ø–æ—Ä–æ–∂–Ω—ñ–π –∞–±–æ —â–µ –Ω–µ –ø–æ–ø–æ–≤–Ω–µ–Ω–∏–π.";
      }
    } catch (e) {
      setStatus("–ù–µ –≤–¥–∞–ª–æ—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ Faucet. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∞–¥—Ä–µ—Å—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É.", "error");
    }
  }

  async function refreshUserState() {
    if (!userAddress || !faucetContract) return;

    try {
      const last = await faucetContract.lastClaimTime(userAddress);
      lastClaimTimeSec = last.toNumber();
    } catch (e) {
      lastClaimTimeSec = 0;
    }

    // –Ø–∫—â–æ —â–µ –∂–æ–¥–Ω–æ–≥–æ Claim ‚Äì –¥–æ–∑–≤–æ–ª—è—î–º–æ –æ–¥—Ä–∞–∑—É (–≤—ñ–∑—É–∞–ª—å–Ω–æ 100)
    const nowSec = Math.floor(Date.now() / 1000);
    let elapsed = lastClaimTimeSec === 0 ? claimIntervalSec : nowSec - lastClaimTimeSec;
    if (elapsed < 0) elapsed = 0;

    const progress = Math.min(1, elapsed / claimIntervalSec);
    const earned = rewardAmountBN
      ? rewardAmountBN.mul(ethers.BigNumber.from(Math.floor(progress * 1e8))).div(ethers.BigNumber.from(1e8))
      : ethers.BigNumber.from(0);

    let earnedHuman = rewardAmountBN
      ? ethers.utils.formatUnits(earned, TOKEN_DECIMALS)
      : "0";
    earnedHuman = trimTo8Decimals(earnedHuman);

    counterValueEl.textContent = earnedHuman;
    progressFillEl.style.width = (progress * 100).toFixed(1) + "%";

    const canClaimFlag = await faucetContract.canClaim(userAddress);
    const remainingSec = Math.max(0, claimIntervalSec - elapsed);

    if (isPaused) {
      claimBtn.disabled = true;
      setStatus("Faucet —Ç–∏–º—á–∞—Å–æ–≤–æ –Ω–∞ –ø–∞—É–∑—ñ. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.", "warn");
    } else if (faucetBalanceBN && faucetBalanceBN.isZero()) {
      claimBtn.disabled = true;
      setStatus("Faucet –ø–æ—Ä–æ–∂–Ω—ñ–π. –û—á—ñ–∫—É—î—Ç—å—Å—è –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞–º–∏ SHAG.", "warn");
    } else if (canClaimFlag) {
      claimBtn.disabled = false;
      setStatus("–î–æ—Å—Ç—É–ø–Ω–æ –¥–æ Claim: –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ 100 SHAG.", "ok");
    } else {
      claimBtn.disabled = true;
      setStatus("–©–µ –Ω–µ –º–∏–Ω—É–≤ —ñ–Ω—Ç–µ—Ä–≤–∞–ª 24 –≥–æ–¥–∏–Ω–∏ –∑ –º–∏–Ω—É–ª–æ–≥–æ Claim.", "warn");
    }

    timerTextEl.textContent = "–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ Claim: " + formatTimeLeft(remainingSec);
  }

  function startMiningLoop() {
    if (miningTimer) clearInterval(miningTimer);
    miningTimer = setInterval(async () => {
      if (!userAddress || !faucetContract || !rewardAmountBN) return;
      const nowSec = Math.floor(Date.now() / 1000);
      let elapsed = lastClaimTimeSec === 0 ? claimIntervalSec : nowSec - lastClaimTimeSec;
      if (elapsed < 0) elapsed = 0;
      const progress = Math.min(1, elapsed / claimIntervalSec);

      const earned = rewardAmountBN
        ? rewardAmountBN.mul(ethers.BigNumber.from(Math.floor(progress * 1e8))).div(ethers.BigNumber.from(1e8))
        : ethers.BigNumber.from(0);

      let earnedHuman = rewardAmountBN
        ? ethers.utils.formatUnits(earned, TOKEN_DECIMALS)
        : "0";
      earnedHuman = trimTo8Decimals(earnedHuman);

      counterValueEl.textContent = earnedHuman;
      progressFillEl.style.width = (progress * 100).toFixed(1) + "%";

      const remainingSec = Math.max(0, claimIntervalSec - elapsed);
      timerTextEl.textContent = "–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ Claim: " + formatTimeLeft(remainingSec);
    }, 1000);
  }

  // ================== –û–ë–†–û–ë–ù–ò–ö–ò –ö–ù–û–ü–û–ö ==================

  connectBtn.addEventListener("click", async () => {
    try {
      const ok = await initProvider();
      if (!ok) return;

      const networkOk = await checkNetwork();
      if (!networkOk) return;

      const accounts = await provider.send("eth_requestAccounts", []);
      if (!accounts || accounts.length === 0) {
        setStatus("–ê–¥—Ä–µ—Å–∞ –≥–∞–º–∞–Ω—Ü—è –Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–∞.", "error");
        return;
      }

      userAddress = accounts[0];
      signer = provider.getSigner();
      setWalletIndicator("ok", userAddress.slice(0, 6) + "..." + userAddress.slice(-4));

      await initContracts();
      await loadFaucetParams();
      await refreshUserState();
      startMiningLoop();
    } catch (e) {
      console.error(e);
      setStatus("–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –≥–∞–º–∞–Ω—Ü—è –∞–±–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ–≤.", "error");
    }
  });

  claimBtn.addEventListener("click", async () => {
    if (!userAddress || !faucetContract) return;
    try {
      claimBtn.disabled = true;
      setStatus("–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—é Claim —É –≤–∞—à–æ–º—É –≥–∞–º–∞–Ω—Ü—ñ‚Ä¶", "warn");

      const faucetWithSigner = faucetContract.connect(signer);
      const tx = await faucetWithSigner.claim();
      setStatus("–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞, –æ—á—ñ–∫—É—î–º–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è‚Ä¶", "warn");

      await tx.wait();
      setStatus("–£—Å–ø—ñ—Ö! 100 SHAG –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à –≥–∞–º–∞–Ω–µ—Ü—å.", "ok");

      // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω
      await loadFaucetParams();
      await refreshUserState();
    } catch (e) {
      console.error(e);
      setStatus("Claim —Å–∫–∞—Å–æ–≤–∞–Ω–æ –∞–±–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ–π –º–µ—Ä–µ–∂—ñ —Ç–∞ –º–∞—î—Ç–µ –≥–∞–∑.", "error");
      await refreshUserState();
    }
  });
</script>
</body>
</html>
